{"data":{"site":{"siteMetadata":{"title":"yusufunlu","author":"Yusuf Unlu"}},"markdownRemark":{"id":"b12a0d85-d886-5539-b070-48032057eb55","html":"<p>Uygulama güvenliği birkaç bağımsız problemle ilgilidir. Bunlar : Authentication(kim?) ve authorization (neye iznin var?). Bu iki kelime birbirine benzediği için authorization yerine access control da kullanılır bazen.</p>\n<h2 id=\"authentication\"><a href=\"#authentication\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Authentication</h2>\n<p>Authentication için ana strateji arayüzü AuthenticationManager interface’idir.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">AuthenticationManager</span> <span class=\"token punctuation\">{</span>\n\n  Authentication <span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span>Authentication authentication<span class=\"token punctuation\">)</span>\n    throws AuthenticationException<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>AuthenticationManager</strong> <strong>authenticate</strong> ile 3 şey yapar</p>\n<ul>\n<li>Eğer inputlar valid ise bir <strong>Authentication</strong> nesnesi döner. <strong>authenticated=true</strong> olarak.</li>\n<li>Eğer inputlar invalid ise <strong>AuthenticationException</strong> fırlatır.</li>\n<li>Girdiler valid olduğuna emin olamazsa <strong>null</strong> döner.</li>\n</ul>\n<p><strong>AuthenticationException</strong> bir runtime exception’dır. Bu exception’ı siz handle etmeseniz bile HTTP 401 dönecektir, <strong>WWW-Authenticate</strong> ile veya değil.</p>\n<p>AuthenticationManager’ın en çok kullanılan implementation’u ProviderManager’dır. ProviderManager da sorumluluğu AuthenticationProvider instance’larına dağıtır. Her AuthenticationProvider biraz AuthenticationManager gibidir. </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">AuthenticationProvider</span> <span class=\"token punctuation\">{</span>\n\n\tAuthentication <span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span>Authentication authentication<span class=\"token punctuation\">)</span>\n\t\t\tthrows AuthenticationException<span class=\"token punctuation\">;</span>\n\n\tboolean <span class=\"token function\">supports</span><span class=\"token punctuation\">(</span>Class<span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span><span class=\"token operator\">></span> authentication<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>supports()</strong> methodu <strong>authenticate()</strong> methoduna geçecek bir paremetreyi destekleyip desteklemediğini anlamak için kullanılır.\n<strong>ProviderManager</strong> AuthenticationProviders zincirini kullanarak farklı auth mekanizmalarını destekleyebilir.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/19992a59bb9ffbc0b14ed45613139986/c283c/ProviderManager.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 70.50420168067227%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADNUlEQVQ4y4VSW2gTaRT+Z0ZbdFn1wRv4sF4Qn7xQn/RRfPDFXW1j2kymM5M2xpTaenkQQYNkLyrogqsiCltEUVGh9YKKWkRhuxbrg9oLycykk8mkuc9MMplMbNPas5O0loWiPZzDOfznnI9zvv8gNC02m63iP2QWVDzABvzfLHH2mYQ/fi7jt1/I+J2nIt7Zo8279VFfsLJcc/vxTzhAOzJjNBpPMFNAR3QNefUs1jJaxDyqgvnVJ7iFZqmT6DWw890J9KjjDd57vQd/2xVAna/T6F63jFZOz0F8HegU1CIoutEcAhhCx62R/6ialXnfMH/v9tVLAAAD+G3eTOJYIbvweDG19leYXOP7oq31jWXW+8a1DadzgeWufct/3LR1/aqjJ3b8UK4tJOmaMd3F51L0oGVDaryxHPfraZrLp5kXk2rTMtSqqXZHQjP3BMLpXwZCys8fuXQtL5eoUTg9TaalbqwclqKeFQWN7Qnx9YoYaoiFQw1xccoSI7IzAaZ7M2q6eW7dP+qVS33aX1feaRcvv1MvXO5VL10VC2f8kGPqXnUdWFQG9b/+21pbweYiCblq0GLIkSKUaChqJJTyTvicdcDnfKNFTyuUNHpOpmeJmW3dGJVYlxRmncMCTckSS0VlFxUX9jH9xoVtdFxxNUdEL8sFW9yi4PXGwoeP6qm9kFmKq2YbYeRbiQmjifiiNeGo4+7O765RB7C6WcnI5PBwlOSCURs3zO0OyqKjAB3fbEqN+3HoRfg3j0fqtA7YtG4OkDzE1oDZ4gbD4wTTQ0LRssJ+hxUzkHNvQYdMo9LkA1jkSaduUAJ/nxwcvEcODtylOK7Lk8v+6bU+5atEh+xtAAehWHABTOyHidFmmBhzA0x6QE3SxgzgSYAlB9TMAzoiPad4/hnFc08bQ0J3i567BsLLKoCz2NQR/16tx1mbzDuZcNBRJwQaqFiEokTeQWVGaLIC5v/fBLPWTe65Wsyymp5hwnmFkS0vGSozYGqsWMq6nLMa2kaLM6CMHCFq+/qIXQ8fEb4HJ6rL74bibo9KJM8H7Z8Evr6fC9oHIpKjPyTUx5Rk4/kKDSmqig/YieQIhf8HUons7VvnOw8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ProviderManager isteğe bağlı olarak başka bir ProviderManager parent'a sahip olabilir\"\n        title=\"\"\n        src=\"/static/19992a59bb9ffbc0b14ed45613139986/fb8a0/ProviderManager.png\"\n        srcset=\"/static/19992a59bb9ffbc0b14ed45613139986/1a291/ProviderManager.png 148w,\n/static/19992a59bb9ffbc0b14ed45613139986/2bc4a/ProviderManager.png 295w,\n/static/19992a59bb9ffbc0b14ed45613139986/fb8a0/ProviderManager.png 590w,\n/static/19992a59bb9ffbc0b14ed45613139986/526de/ProviderManager.png 885w,\n/static/19992a59bb9ffbc0b14ed45613139986/fa2eb/ProviderManager.png 1180w,\n/static/19992a59bb9ffbc0b14ed45613139986/c283c/ProviderManager.png 1190w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>ProviderManager isteğe bağlı olarak başka bir ProviderManager parent’a sahip olabilir. Eğer <strong>AuthenticationProviders</strong> null parent’a düşer bu istek.\nUygulamamız <strong>/api/</strong> path’ine göre farklı logic resource gruplardan oluşabilir. Her grup kendi dedicated <strong>AuthenticationManager</strong> ‘ına yani <strong>ProviderManager</strong>‘a sahiptir. Bunlar da ortak bir parent’a sahiptir ve buna global denir. Tüm provider’lar buraya düşer.</p>\n<h2 id=\"customizing-authentication-managers\"><a href=\"#customizing-authentication-managers\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Customizing Authentication Managers</h2>\n<p>Spring Security, bize temel authentication manager özelliklerini ayarlamamız için bazı helper class’lar verir. Bunlardan en çok kullanılanı <strong>AuthenticationManagerBuilder</strong>. Bu class bize in-memory, JDBC ya da LDAP kullanıcı detayları ya da custom UserDetailsService için kolaylık sağlar.</p>\n<ul>\n<li>Aşağıda global <strong>AuthenticationManager</strong> ayarlamak için örnek kodlar vardır.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">@Configuration\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ApplicationSecurity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WebSecurityConfigurerAdapter</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token operator\">...</span> <span class=\"token comment\">// web stuff here</span>\n\n  @Autowired\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span>AuthenticationManagerBuilder builder<span class=\"token punctuation\">,</span> DataSource dataSource<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    builder<span class=\"token punctuation\">.</span><span class=\"token function\">jdbcAuthentication</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">dataSource</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">withUser</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dave\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">password</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"secret\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">roles</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"USER\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","timeToRead":2,"frontmatter":{"title":"Spring Security Architecture","date":"April 25, 2020","spoiler":"Authentication and Authorization(Access Control)"},"fields":{"slug":"/Spring Security Architecture/","langKey":"en"}}},"pageContext":{"slug":"/Spring Security Architecture/","previous":{"fields":{"slug":"/ilk-post/","langKey":"en","directoryName":"ilk-post","maybeAbsoluteLinks":[]},"frontmatter":{"title":"First post and this blog"}},"next":null,"translations":["tr"],"translatedLinks":[]}}
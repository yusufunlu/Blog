<!DOCTYPE html><html lang="zh-hant"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/Personal-Blog/2.8bee379ac3150e408f97.css">@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(/Personal-Blog/static/merriweather-400-l-8796b7875d52e9cb9b280211e8d3f82d.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:url(/Personal-Blog/static/montserrat-900-l-5751237264c0468be0d48ad1cea75b90.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}body{--pink:#ffa7c4;background-color:var(--bg)}body.light{--bg:#fff;--header:var(--pink);--textNormal:#222;--textTitle:#222;--textLink:#d23669;--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a}body.dark{-webkit-font-smoothing:antialiased;--bg:#282c35;--header:#fff;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--textLink:var(--pink);--hr:hsla(0,0%,100%,0.2);--inlineCode-bg:#373c49;--inlineCode-text:#e6e6e6}body:lang(ar) article,body:lang(fa) article{direction:rtl}body:lang(ar) .language-text,body:lang(ar) article .translations,body:lang(ar) article pre,body:lang(fa) .language-text,body:lang(fa) article .translations,body:lang(fa) article pre{direction:ltr}body:lang(ar) .language-text,body:lang(fa) .language-text{display:inline-block}body:lang(ar) blockquote,body:lang(fa) blockquote{border-left:unset;border-right:.32813rem solid rgba(0,0,0,.9);padding-right:1.42188rem;padding-left:unset;margin-left:.75rem;margin-right:-1.75rem}body:lang(fa) article,body:lang(fa) header>h1{font-family:Vazir}body:lang(ar) article,body:lang(ar) header>h1{font-family:Cairo,sans-serif}body:lang(ko) article,body:lang(ko) header{word-break:keep-all}code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;-webkit-font-feature-settings:normal;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{overflow:auto;padding:1.3125rem}pre[class*=language-]::selection{background:#27292a}pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,100%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15em .2em .05em;white-space:normal}.token.attr-name{color:#addb67;font-style:italic}.token.comment{color:#809393}.token.string,.token.url{color:#addb67}.token.variable{color:#d6deeb}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.punctuation{color:#c792ea}.token.doctype,.token.selector{color:#c792ea;font-style:"italic"}.token.class-name{color:#ffcb8b}.token.keyword,.token.operator,.token.tag{color:#ffa7c4}.token.boolean{color:#ff5874}.token.property{color:#80cbc4}.token.namespace{color:#b2ccd6}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;padding-right:1em;padding-left:1.25em;border-left:.25em solid #ffa7c4}.gatsby-highlight,.gatsby-highlight-code-line{margin-right:-1.3125rem;margin-left:-1.3125rem}.gatsby-highlight{margin-bottom:1.75rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto}@media (max-width:672px){.gatsby-highlight{border-radius:0}}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}.react-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:transparent;border:0;padding:0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.react-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{width:50px;height:24px;padding:0;border-radius:30px;background-color:#0f1114;transition:all .2s ease}.react-toggle-track-check{position:absolute;width:17px;height:17px;left:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:0;transition:opacity .25s ease}.react-toggle--checked .react-toggle-track-check,.react-toggle-track-x{opacity:1;transition:opacity .25s ease}.react-toggle-track-x{position:absolute;width:17px;height:17px;right:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0}.react-toggle--checked .react-toggle-track-x{opacity:0}.react-toggle-thumb{position:absolute;top:1px;left:1px;width:22px;height:22px;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;-webkit-transform:translateX(0);transform:translateX(0)}.react-toggle--checked .react-toggle-thumb{-webkit-transform:translateX(26px);transform:translateX(26px);border-color:#19ab27}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}</style><style data-href="/Personal-Blog/component---src-templates-blog-post-js.77da55083c18bdb7fbef.css">@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:url(/Personal-Blog/static/merriweather-400-i-l-9a3ea56a5f449980432ace5972181ef6.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:url(/Personal-Blog/static/merriweather-700-l-e24e02bb044cb07539a3a6bd12348d14.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:url(/Personal-Blog/static/merriweather-700-i-l-ad085ede31afcc5585ff34869b1cd029.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.formkit-form *{box-sizing:border-box}.formkit-form legend{border:none;font-size:inherit;margin-bottom:10px;padding:0;position:relative;display:table}.formkit-form fieldset{border:0;padding:.01em 0 0;margin:0;min-width:0}.formkit-form body:not(:-moz-handler-blocked) fieldset{display:table-cell}.formkit-form p{color:inherit;font-size:inherit;font-weight:inherit}.formkit-form[data-format="slide in"],.formkit-form[data-format=modal]{display:none}.formkit-form .formkit-checkboxes,.formkit-form .formkit-input,.formkit-form .formkit-select{width:100%}.formkit-form .formkit-button,.formkit-form .formkit-submit{border:0;border-radius:5px;color:#fff;cursor:pointer;display:inline-block;text-align:center;font-size:15px;font-weight:500;margin-bottom:15px;overflow:hidden;padding:0;position:relative;vertical-align:middle}.formkit-form .formkit-button:focus,.formkit-form .formkit-button:hover,.formkit-form .formkit-submit:focus,.formkit-form .formkit-submit:hover{outline:none}.formkit-form .formkit-button:focus>span,.formkit-form .formkit-button:hover>span,.formkit-form .formkit-submit:focus>span,.formkit-form .formkit-submit:hover>span{background-color:#dc658d}.formkit-form .formkit-button>span,.formkit-form .formkit-submit>span{display:block;transition:all .3s ease-in-out;padding:12px 24px}.formkit-form .formkit-input{background:#fff;font-size:15px;padding:12px;border:1px solid #e3e3e3;flex:1 0 auto;line-height:1.4;margin:0;transition:border-color .3s ease-out}.formkit-form .formkit-input:focus{outline:none;border-color:#1677be;transition:border-color .3s ease}.formkit-form .formkit-input::-webkit-input-placeholder{color:#848585}.formkit-form .formkit-input:-ms-input-placeholder{color:#848585}.formkit-form .formkit-input::-ms-input-placeholder{color:#848585}.formkit-form .formkit-input::placeholder{color:#848585}.formkit-form [data-group=dropdown]{position:relative;display:inline-block;width:100%}.formkit-form [data-group=dropdown]:before{content:"";top:calc(50% - 2.5px);right:10px;position:absolute;pointer-events:none;border-color:#4f4f4f transparent transparent;border-style:solid;border-width:6px 6px 0;height:0;width:0;z-index:999}.formkit-form [data-group=dropdown] select{height:auto;width:100%;cursor:pointer;color:#333;line-height:1.4;margin-bottom:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:15px;padding:12px 25px 12px 12px;border:1px solid #e3e3e3;background:#fff}.formkit-form [data-group=dropdown] select:focus{outline:none}.formkit-form [data-group=checkboxes]{text-align:left;margin:0}.formkit-form [data-group=checkboxes] [data-group=checkbox]{margin-bottom:10px}.formkit-form [data-group=checkboxes] [data-group=checkbox] *{cursor:pointer}.formkit-form [data-group=checkboxes] [data-group=checkbox]:last-of-type{margin-bottom:0}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]{display:none}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]+label:after{content:none}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]:checked+label:after{border-color:#fff;content:""}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]:checked+label:before{background:#10bf7a;border-color:#10bf7a}.formkit-form [data-group=checkboxes] [data-group=checkbox] label{position:relative;display:inline-block;padding-left:28px}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:after,.formkit-form [data-group=checkboxes] [data-group=checkbox] label:before{position:absolute;content:"";display:inline-block}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:before{height:16px;width:16px;border:1px solid #e3e3e3;background:#fff;left:0;top:3px}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:after{height:4px;width:8px;border-left:2px solid #4d4d4d;border-bottom:2px solid #4d4d4d;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);left:4px;top:8px}.formkit-form .formkit-alert{background:#f9fafb;border:1px solid #e3e3e3;border-radius:5px;flex:1 0 auto;list-style:none;margin:25px auto;padding:12px;text-align:center;width:100%}.formkit-form .formkit-alert:empty{display:none}.formkit-form .formkit-alert-success{background:#d3fbeb;border-color:#10bf7a;color:#0c905c}.formkit-form .formkit-alert-error{background:#fde8e2;border-color:#f2643b;color:#ea4110}.formkit-form .formkit-spinner{display:flex;height:0;width:0;margin:0 auto;position:absolute;top:0;left:0;right:0;overflow:hidden;text-align:center;transition:all .3s ease-in-out}.formkit-form .formkit-spinner>div{margin:auto;width:12px;height:12px;background-color:#fff;opacity:.3;border-radius:100%;display:inline-block;-webkit-animation:formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd- 1.4s ease-in-out infinite both;animation:formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd- 1.4s ease-in-out infinite both}.formkit-form .formkit-spinner>div:first-child{-webkit-animation-delay:-.32s;animation-delay:-.32s}.formkit-form .formkit-spinner>div:nth-child(2){-webkit-animation-delay:-.16s;animation-delay:-.16s}.formkit-form .formkit-submit[data-active] .formkit-spinner{opacity:1;height:100%;width:50px}.formkit-form .formkit-submit[data-active] .formkit-spinner~span{opacity:0}@-webkit-keyframes formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd-{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd-{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}.formkit-form{box-shadow:0 2px 15px 0 rgba(210,214,220,.5);max-width:700px;overflow:hidden}.formkit-form [data-style=full]{width:100%;display:block}.formkit-form .formkit-header{margin-top:0;margin-bottom:20px;font-family:inherit}.formkit-form .formkit-subheader{margin:15px 0}.formkit-form .formkit-column{background-size:cover;background-repeat:no-repeat;background-position:50%;padding:20px}.formkit-form .formkit-column:nth-child(2){border-top:1px solid #e9ecef}.formkit-form .formkit-field{margin:0 0 15px}.formkit-form .formkit-input,.formkit-form .formkit-submit{width:100%}.formkit-form .formkit-guarantee{font-size:13px;margin:0 0 15px}.formkit-form .formkit-guarantee>p{margin:0}.formkit-form .formkit-powered-by{color:#7d7d7d;display:block;font-size:12px;margin-bottom:0;text-align:center}.formkit-form .formkit-powered-by[data-active=false]{opacity:.5}.formkit-form[min-width~="600"] [data-style=full],.formkit-form[min-width~="700"] [data-style=full],.formkit-form[min-width~="800"] [data-style=full]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.formkit-form[min-width~="600"] .formkit-submit,.formkit-form[min-width~="700"] .formkit-submit,.formkit-form[min-width~="800"] .formkit-submit{width:auto}.formkit-form[min-width~="600"] .formkit-column,.formkit-form[min-width~="700"] .formkit-column,.formkit-form[min-width~="800"] .formkit-column{padding:40px}.formkit-form[min-width~="600"] .formkit-column:nth-child(2),.formkit-form[min-width~="700"] .formkit-column:nth-child(2),.formkit-form[min-width~="800"] .formkit-column:nth-child(2){border-top:none}</style><meta name="generator" content="Gatsby 2.0.91"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="Dan Abramov&#x27;s Overreacted Blog RSS Feed" href="/Personal-Blog/rss.xml"/><link rel="shortcut icon" href="/Personal-Blog/icons/icon-48x48.png"/><link rel="manifest" href="/Personal-Blog/manifest.webmanifest"/><title data-react-helmet="true">React 如何從函式（Function）中區分出類別（Class）？ — Overreacted</title><meta data-react-helmet="true" name="theme-color" content="#282c35"/><meta data-react-helmet="true" name="description" content="我們談論關於類別、new、instanceof、原型鏈（prototype chains）、和 API 設計。"/><meta data-react-helmet="true" property="og:url" content="https://yusufunlu.github.io/Personal-Blog//zh-hant/how-does-react-tell-a-class-from-a-function/"/><meta data-react-helmet="true" property="og:title" content="React 如何從函式（Function）中區分出類別（Class）？"/><meta data-react-helmet="true" property="og:description" content="我們談論關於類別、new、instanceof、原型鏈（prototype chains）、和 API 設計。"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@dan_abramov"/><meta data-react-helmet="true" name="twitter:title" content="React 如何從函式（Function）中區分出類別（Class）？"/><meta data-react-helmet="true" name="twitter:description" content="我們談論關於類別、new、instanceof、原型鏈（prototype chains）、和 API 設計。"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:inherit;font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);border-left-color:inherit;opacity:0.8;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:var(--hr);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:var(--textLink);text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}a.anchor{box-shadow:none;}a.anchor svg[aria-hidden="true"]{stroke:var(--textLink);}p code{font-size:1rem;}h1 code, h2 code, h3 code, h4 code, h5 code, h6 code{font-size:inherit;}li code{font-size:1rem;}blockquote.translation{font-size:1em;}</style><link as="script" rel="preload" href="/Personal-Blog/component---src-templates-blog-post-js-ef2898a2e81c47683f5b.js"/><link as="script" rel="preload" href="/Personal-Blog/app-198cd55e69a6a03b3f73.js"/><link as="script" rel="preload" href="/Personal-Blog/0-b197e8c6c7ff26484233.js"/><link as="script" rel="preload" href="/Personal-Blog/2-469c709c476faea7103a.js"/><link as="script" rel="preload" href="/Personal-Blog/1-1b550cd61a5e170131aa.js"/><link as="script" rel="preload" href="/Personal-Blog/webpack-runtime-816b037bee21ad2c738f.js"/><link as="fetch" rel="preload" href="/Personal-Blog/static/d/363/path---zh-hant-how-does-react-tell-a-class-from-a-function-44-c-f3f-6zEIaNlJKPjN0RBGihIpgWNC88.json" crossorigin="use-credentials"/></head><body class="light"><script>
              (function() {
                window.__onThemeChange = function() {};
                function setTheme(newTheme) {
                  window.__theme = newTheme;
                  preferredTheme = newTheme;
                  document.body.className = newTheme;
                  window.__onThemeChange(newTheme);
                }

                var preferredTheme;
                try {
                  preferredTheme = localStorage.getItem('theme');
                } catch (err) { }

                window.__setPreferredTheme = function(newTheme) {
                  setTheme(newTheme);
                  try {
                    localStorage.setItem('theme', newTheme);
                  } catch (err) {}
                }

                var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
                darkQuery.addListener(function(e) {
                  window.__setPreferredTheme(e.matches ? 'dark' : 'light')
                });

                setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
              })();
            </script><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="color:var(--textNormal);background:var(--bg);transition:color 0.2s ease-out, background 0.2s ease-out;min-height:100vh"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:2.625rem"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:0;height:42px;line-height:2.625rem"><a style="box-shadow:none;text-decoration:none;color:rgb(255, 167, 196)" href="/Personal-Blog/">Overreacted</a></h3><div style="height:24px"></div></header><main><article><header><h1 style="color:var(--textTitle)">React 如何從函式（Function）中區分出類別（Class）？</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.4rem">December 2, 2018<!-- --> • ☕️☕️ 10 min read</p><div class="translations"><p style="font-size:0.9em;border:1px solid var(--hr);border-radius:0.75em;padding:0.75em;background:var(--inlineCode-bg);word-break:keep-all;font-family:system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;,
    &quot;Roboto&quot;, &quot;Oxygen&quot;, &quot;Ubuntu&quot;, &quot;Cantarell&quot;, &quot;Fira Sans&quot;,
    &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif"><span><span>Translated by readers into: </span><a href="/Personal-Blog/es/how-does-react-tell-a-class-from-a-function/">Español</a> • <a href="/Personal-Blog/fr/how-does-react-tell-a-class-from-a-function/">Français</a> • <a href="/Personal-Blog/hu/how-does-react-tell-a-class-from-a-function/">Magyar</a> • <a href="/Personal-Blog/sk/how-does-react-tell-a-class-from-a-function/">Slovenčina</a> • <a href="/Personal-Blog/ja/how-does-react-tell-a-class-from-a-function/">日本語</a> • <a href="/Personal-Blog/zh-hans/how-does-react-tell-a-class-from-a-function/">简体中文</a> • <b>繁體中文</b></span><br/><br/><a href="/Personal-Blog/how-does-react-tell-a-class-from-a-function/">Read the original</a> • <a href="https://github.com/gaearon/overreacted.io/edit/master/src/pages/how-does-react-tell-a-class-from-a-function/index.zh-hant.md" target="_blank" rel="noopener noreferrer">Improve this translation</a> • <a href="/Personal-Blog/zh-hant">View all translated posts</a> </p></div></header><div><p>看看這個被定義為函式的 <code class="language-text">Greeting</code> 元件：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>React 也支援把它定義為類別：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>（直到 <a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="nofollow noopener noreferrer">最近</a>，這是唯一能使用像是 state 功能的方法。）</p>
<p>當你想要繪製（render）一個 <code class="language-text">&lt;Greeting /&gt;</code> 時，你不需要煩惱這個元件是如何被定義的：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// 類別或函式 — 隨意。</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Greeting</span> <span class="token punctuation">/></span></span></code></pre></div>
<p>但是 <em>React 本身</em> 在乎這兩者的不同！</p>
<p>如果 <code class="language-text">Greeting</code> 是一個函式, React 需要呼叫它：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// 你的程式碼</span>
<span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// React 內</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Hello&lt;/p></span></code></pre></div>
<p>但如果 <code class="language-text">Greeting</code> 是一個類別，React 需要用 <code class="language-text">new</code> 運算符實現出它的實例，<em>再</em> 呼叫剛才創建的實例中的 <code class="language-text">render</code> 方法：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// 你的程式碼</span>
<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// React 內</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Greeting {}</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Hello&lt;/p></span></code></pre></div>
<p>在上述兩種情境中，React 的目的是拿到繪製過的節點（在這例子中是<code class="language-text">&lt;p&gt;Hello&lt;/p&gt;</code>），但是確切的步驟取決於 <code class="language-text">Greeting</code> 是如何被定義的。</p>
<p><strong>所以 React 是如何知道這個元件是類別還是函式？</strong></p>
<p>正如我 <a href="/Personal-Blog/why-do-we-write-super-props/">上一篇文章</a>所說的，<strong>你 <em>不需要</em> 知道這個也能夠有效使用 React，</strong>我多年以來也都不知道這兩者的差別。請不要把這變成一道面試題。事實上，這篇文章與其說是討論 React 的運作，更多的是討論 JavaScript 如何運作。</p>
<p>這個部落格是給想要知道 <em>為什麽</em> React 是以這種方式運作而感到好奇的讀者。你是這種人嗎？那讓我們一起鑽研吧。</p>
<p><strong>這是一段漫長的旅程，繫好安全帶了。這篇文章並不會討論太多關於 React 本身的資訊。相反的，我們會討論 <code class="language-text">new</code>、<code class="language-text">this</code>、<code class="language-text">class</code>、箭頭函式、<code class="language-text">prototype</code>、<code class="language-text">__proto__</code>、<code class="language-text">instanceof</code> 的某些面向，還有這些東西是如何在 JavaScript 中協同運作的。幸運的是，當你 <em>使用</em> React 時你不必考慮那麼多。不過如果你正在實做 React 的話…</strong></p>
<p>（如果你真的只想知道答案的話，直接看最後一段。）</p>
<hr>
<p>首先，我們需要理解為什麼以不同的方式處理函式跟類別是很重要的。注意我們在呼叫類別時是如何使用 <code class="language-text">new</code> 運算符：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// 如果 Greeting 是個函式</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Hello&lt;/p></span>

<span class="token comment">// 如果 Greeting 是個類別</span>
<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Greeting {}</span></span><span class="token keyword">const</span> result <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Hello&lt;/p></span></code></pre></div>
<p>讓我們看看 <code class="language-text">new</code> 運算符在 JavaScript 中大致上有什麼作用。</p>
<hr>
<p>以前 JavaScript 是沒有類別的。然而，你可以直接用函式表達類似類別的模式。說得更具體一點，你可以用 <em>任何</em> 函式扮演類似類別的建構子，你只要在呼叫函式前加上 <code class="language-text">new</code> 就可以了：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// 只是個函式</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ✅ Person {name: 'Fred'}</span>
<span class="token keyword">var</span> george <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'George'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 🔴 不行</span></code></pre></div>
<p>你到今天仍然能寫這樣的程式碼！在 DevTools 中試試看。</p>
<p>如果你呼叫 <code class="language-text">Person(&#39;Fred&#39;)</code> 時<strong>缺少了</strong> <code class="language-text">new</code>，在這之間的 <code class="language-text">this</code> 會指向某個全域而無用的東西（例如，<code class="language-text">window</code> 或 <code class="language-text">undefined</code>）。所以我們的程式碼將會異常終止，或是做一些像設置 <code class="language-text">window.name</code> 的蠢事。</p>
<p>藉由在呼叫前增加 <code class="language-text">new</code>，我們告訴 JavaScript 說：「嘿 JavaScript，我知道 <code class="language-text">Person</code> 只是一個函式，但讓我們假裝它就像一個類別的建構子，<strong>創建一個 <code class="language-text">{}</code> 物件並且將 <code class="language-text">Person</code> 函式內部的 <code class="language-text">this</code> 指向這個物件，這樣我就能設置 <code class="language-text">this.name</code> 之類的東西了。然後把這個物件回傳給我。</strong>」</p>
<p>這就是 <code class="language-text">new</code> 運算符做的事。</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 與 `Person` 內的 `this` 相同的物件</span></code></pre></div>
<p><code class="language-text">new</code> 運算符也可以創建出我們放在 <code class="language-text">Person.prototype</code> 上的任何東西到 <code class="language-text">fred</code> 物件上：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="gatsby-highlight-code-line">Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hi, I am '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">}</span></span>
<span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">fred<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div>
<p>這就是大家在 JavaScript 直接增加類別之前模擬它的方式。</p>
<hr>
<p>所以 <code class="language-text">new</code> 已經在 JavaScript 中存在了一段時間。然而，類別是最近才有的。它讓我們能更貼近我們意圖地重寫上述的程式碼：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hi, I am '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fred<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>在程式語言和 API 設計中，<em>抓住開發者的意圖</em> 是重要的。</p>
<p>如果你使用函式，JavaScript 會無法猜測它是否該被呼叫（如 <code class="language-text">alert()</code> ），或是它是被用來當成一個建構子（ 如<code class="language-text">new Person()</code>）。而如果你忘記在的函式前指定 <code class="language-text">new</code>（像是 <code class="language-text">Person</code>），這亦會導致程式出現令人困惑的異常行為。</p>
<p><strong>類別語法讓我們能表示：「這不只是一個函式 —— 他是一個類別，而且有建構子。」</strong>如果你在呼叫它時忘記用 <code class="language-text">new</code>，JavaScript 將會提出錯誤：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ✅  如果 Person 是一個函式： 沒問題</span>
<span class="token comment">// ✅  如果 Person 是一個類別： 也沒問題</span>

<span class="token keyword">let</span> george <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'George'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 我們忘記 `new` 了</span>
<span class="token comment">// 😳 如果 Person 是一個像建構子的函式：令人困惑的行為</span>
<span class="token comment">// 🔴 如果 Person 是一個類別：直接失敗</span></code></pre></div>
<p>這有助於我們儘早發現錯誤，而不是等待一些晦澀費解的錯誤發生，例如 <code class="language-text">this.name</code> 被當成 <code class="language-text">window.name</code> 而不是 <code class="language-text">george.name</code>。</p>
<p>然而，這意味著 React 需要在呼叫任何類別之前寫 <code class="language-text">new</code>，它不能只是將它當作一般的函式呼叫，因為 JavaScript 會將其視為一個錯誤！</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 🔴 React 不能這樣做：</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">Counter</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>這會帶來麻煩。</p>
<hr>
<p>在我們探討 React 如何解決這個問題前，重要的是要記得大多數 React 的開發者會使用如 Babel 的編譯器來編譯最新的功能，比如對舊版瀏覽器支援類別的使用。所以我們需要在我們的設計中考慮到有編譯器的狀況。</p>
<p>在 Babel 早期的版本，類別可以在沒有指名 <code class="language-text">new</code> 的情況下被呼叫，然而，這已經被修正了 ——  藉由產生一些額外的程式碼：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 稍微簡化從 Babel 的輸出</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">"Cannot call a class as a function"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 我們的程式碼：</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ✅ 沒問題</span>
<span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'George'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 🔴 無法像呼叫函式般呼叫一個類別</span></code></pre></div>
<p>你可能在捆綁包中看過這樣的程式碼，這全是 <code class="language-text">_classCallCheck</code> 函式所做的事。（你可以藉由選擇不進行檢查的「鬆散模式（loose mode）」來減少捆綁包大小，但這可能會使你最終轉換為原生的類別變得複雜。）</p>
<hr>
<p>目前為止，你應該對用 <code class="language-text">new</code> 或不用 <code class="language-text">new</code> 呼叫某些東西之間的差別有一個大致的理解：</p>
<table>
<thead>
<tr>
<th></th>
<th><code class="language-text">new Person()</code></th>
<th><code class="language-text">Person()</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="language-text">class</code></td>
<td>✅ <code class="language-text">this</code> 是 <code class="language-text">Person</code> 的實例</td>
<td>🔴 <code class="language-text">TypeError</code></td>
</tr>
<tr>
<td><code class="language-text">function</code></td>
<td>✅ <code class="language-text">this</code> 是 <code class="language-text">Person</code> 的實例</td>
<td>😳 <code class="language-text">this</code> 是 <code class="language-text">window</code> 或 <code class="language-text">undefined</code></td>
</tr>
</tbody>
</table>
<p>這就是為什麼正確地呼叫你的元件對 React 來說是極為重要的。<strong>如果你的元件被定義為類別，React 便需要在呼叫時使用 <code class="language-text">new</code>。</strong></p>
<p>所以 React 光是透過檢查就能確認某個元件是不是類別嗎？</p>
<p>沒那麼容易！即使我們可以 <a href="https://stackoverflow.com/questions/29093396/how-do-you-check-the-difference-between-an-ecmascript-6-class-and-function" target="_blank" rel="nofollow noopener noreferrer">在 JavaScript 函式中區別出類別</a>，這仍然不適用於被像是 Babel 這樣的工具處理過的類別。對於瀏覽器而言，它們就只是單純的函式。對 React 來說真是倒楣。</p>
<hr>
<p>好吧，所以或許 React 可以在每次呼叫時使用 <code class="language-text">new</code>？不幸的是，這也不見得總是奏效。</p>
<p>在一般的函式中用 <code class="language-text">new</code> 來呼叫它們，會給它們一個物件實例當作是 <code class="language-text">this</code>。這對於寫成建構子的函式（像上述的 <code class="language-text">Person</code>）是合適的，但它對函式元件而言是很混亂的：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 我們不會期望 `this` 在這裡是任何一種實例。</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>但這種情況還算可以忍受的。這裡有兩個 <em>其他</em> 可以扼殺這個想法的理由。</p>
<hr>
<p>第一個為什麼使用 <code class="language-text">new</code> 不總是奏效的理由，是使用 <code class="language-text">new</code> 呼叫原生（不是被 Babel 編譯過）的箭頭函式（Arrow function）會拋出一個錯誤：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">Greeting</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 🔴 Greeting is not a constructor</span></code></pre></div>
<p>這種行為是刻意的，並且遵循箭頭函數的設計。箭頭函式的主要優點之一是它們 <em>沒有</em> 自己的 <code class="language-text">this</code> 值。 <code class="language-text">this</code> 是從最靠近自身的一般函式決定的：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Friends</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>    <span class="token keyword">const</span> friends <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>friends<span class="token punctuation">;</span>
    <span class="token keyword">return</span> friends<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>friend <span class="token operator">=></span>
      <span class="token operator">&lt;</span>Friend
<span class="gatsby-highlight-code-line">        <span class="token comment">// `this` 是從 `render` 方法中決定的</span></span><span class="gatsby-highlight-code-line">        size<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>size<span class="token punctuation">}</span></span>        name<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
        key<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>好的，所以<strong>箭頭函式是沒有自己的 <code class="language-text">this</code> 值的，</strong>但這意味著拿它們當作建構子是完全沒有作用的！</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 🔴 這樣不合理！</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>因此，<strong>JavaScript 不允許使用 <code class="language-text">new</code> 呼叫一個箭頭函式。</strong>如果你這麼做的話，你無論如何都會產生一個錯誤，這件事最好早點告訴你。這跟 JavaScript 不讓你在 <em>沒有</em> <code class="language-text">new</code> 時呼叫一個類別的情況類似。</p>
<p>這個行為很棒，但同時也搞雜了我們的計劃，React 不能僅僅對所有的東西呼叫 <code class="language-text">new</code>，因為它違背了箭頭函式！我們也許能試著透過箭頭函式缺少 <code class="language-text">prototype</code> 的特性來特別偵測出它們，並且只不 <code class="language-text">new</code> 它們：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>prototype <span class="token comment">// undefined</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>prototype <span class="token comment">// {constructor: f}</span></code></pre></div>
<p>但這對被 Babel 編譯過的函式 <a href="https://github.com/facebook/react/issues/4599#issuecomment-136562930" target="_blank" rel="nofollow noopener noreferrer">不奏效</a>。這或許不是什麼大問題，但是還有另一個理由能使這種方法走向一條死路。</p>
<hr>
<p>另一個我們不能總是使用 <code class="language-text">new</code> 的理由，是它會阻隔 React 拿到從那些支援回傳字串或其他基本型態的元件。</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ✅ 'Hello'</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 😳 Greeting {}</span></code></pre></div>
<p>又來，這再次與 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">new</code> 運算符</a> 的古怪設計有關，正如我們之前看到的，<code class="language-text">new</code> 告訴 JavaScript 引擎創建一個物件，在內部創建一個 <code class="language-text">this</code> 物件，然後將這個物件當作 <code class="language-text">new</code> 的結果回給我們。</p>
<p>然而，JavaScript 還允許被 <code class="language-text">new</code> 呼叫的函式藉由回傳其他物件來 <em>覆蓋</em> 它的回傳值，根據推測，這被認為對於如果我們想要用池化來重用實例，這樣的模式會很有用：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line"><span class="token comment">// 懶創建</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> zeroVector <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="token keyword">function</span> <span class="token function">Vector</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>zeroVector <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token comment">// 重用相同的實例</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">return</span> zeroVector<span class="token punctuation">;</span></span>    <span class="token punctuation">}</span>
    zeroVector <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 😲 b === c</span></span></code></pre></div>
<p>然而，如果一個函式的回傳值 <em>不是</em> 一個物件， <code class="language-text">new</code> 會 <em>完全忽略</em> 它，就是說如果你回傳字串或是數字，它會像根本沒有回傳一樣。</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">Answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ✅ 42</span>
<span class="token keyword">new</span> <span class="token class-name">Answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 😳 Answer {}</span></code></pre></div>
<p>所以這裡根本沒有辦法當函式被用 <code class="language-text">new</code> 呼叫時，讀到它原本的回傳值（像是數字或字串）。因此，如果 React 總是使用 <code class="language-text">new</code> 來呼叫函式，它將會無法增加那些回傳字串的元件的支援！</p>
<p>這無法接受，我們勢必得妥協。</p>
<hr>
<p>到目前為止我們學到了什麼？React 必須 <em>用</em> <code class="language-text">new</code> 呼叫類別（包含 Babel 的輸出），但必須 <em>不用</em> <code class="language-text">new</code> 呼叫一般的函式（包含 Babel 的輸出）或是箭頭函式，而且並沒有可靠的方法區別它們。</p>
<p><strong>如果我們解決不了一般性的問題，那我們能否解決比較特定的問題？</strong></p>
<p>當你將元件定義一個類別時，你可能想要為了 <code class="language-text">this.setState()</code> 這樣的預設方法去擴展 <code class="language-text">React.Component</code>，<strong>跟試著檢查所有類別相比，我們能否只偵測 <code class="language-text">React.Component</code> 的子孫？</strong></p>
<p>劇透：這正是 React 所做的。</p>
<hr>
<p>或許，檢查 <code class="language-text">Greeting</code> 是不是 React 元件的慣用方法，是測試是否 <code class="language-text">Greeting.prototype instanceof React.Component</code>：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">.</span>prototype <span class="token keyword">instanceof</span> <span class="token class-name">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></div>
<p>我知道你在想什麼，剛剛發生什麼事！？要回答這個問題，我們需要了解 JavaScript 的原型（prototype）。</p>
<p>你可以常聽到「原型鏈（prototype chain）」，在 JavaScript 中，所有的物件都應該有一個「原型」。當我們寫 <code class="language-text">fred.sayHi()</code> 而沒有 <code class="language-text">sayHi</code> 屬性時，我們會從 <code class="language-text">fred</code> 物件的原型中尋找 <code class="language-text">sayHi</code> 屬性。如果我們在那裡找不到，我們會看看鏈中的下一個原型 — <code class="language-text">fed</code> 原型的原型，以此類推。</p>
<p><strong>令人費解的是，一個類別或函式的 <code class="language-text">prototype</code> 屬性 <em>並不會</em> 指向該值的原型。</strong>我不是在開玩笑。</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 🤪 不是 Person 的原型</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 😳 Person 的原型</span></code></pre></div>
<p>所以「原型鏈」比較像是 <code class="language-text">__proto__.__proto__.__proto__</code> 而不是 <code class="language-text">prototype.prototype.prototype</code>，這我花了多年才理解。</p>
<p>那麼在函式或是類別上的 <code class="language-text">prototype</code> 屬性是什麼？<strong>它是提供給所有被類別或函式 <code class="language-text">new</code> 過的物件的 <code class="language-text">__proto__</code>！</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hi, I am '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 把 `fred.__proto__` 設成 `Person.prototype`</span></span></code></pre></div>
<p>然而 <code class="language-text">__proto__</code> 鏈就是 JavaScript 找屬性的方式：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">fred<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1. fred 有 sayHi 屬性嗎？ 沒有。</span>
<span class="token comment">// 2. fred.__proto__ 有 sayHi 屬性嗎？有。呼叫它！</span>

fred<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1. fred 有 toString 屬性嗎？ 沒有。</span>
<span class="token comment">// 2. fred.__proto__ 有 toString 屬性嗎？ 沒有。</span>
<span class="token comment">// 3. fred.__proto__.__proto__ 有 toString 屬性嗎？ 有。呼叫它！</span></code></pre></div>
<p>在實務上，除非你在除原型鏈相關的錯誤，否則你幾乎不需要直接在程式碼中碰到 <code class="language-text">__proto__</code>，如果你想在 <code class="language-text">fed.__proto__</code> 提供東西的話，你應該把它放在 <code class="language-text">Person.prototype</code>，至少它原先是這麼被設計的。</p>
<p>起初， <code class="language-text">__proto__</code> 屬性甚至不應該被瀏覽器曝露的，因為原型鏈被視為是內部的概念，但是有些瀏覽器添加了 <code class="language-text">__proto__</code>，最終它勉為其難地被標準化了（但已經被棄用了，取而代之的是 <code class="language-text">Object.getPrototypeOf()</code>）。</p>
<p><strong>然而，我仍然覺得一個被稱為 <code class="language-text">prototype</code> 的屬性並沒有提供給你該值的原型而感到非常的困惑</strong>（舉例來說，<code class="language-text">fred.prototype</code> 未被定義是因為 <code class="language-text">fred</code> 不是一個函式）。對我而言，我認為這個即使是經驗豐富的開發者也會誤解 JavaScript 原型最大的原因。</p>
<hr>
<p>這是一篇很長的貼文，你說是吧？我們在這已經 8 成，稍等一會兒。</p>
<p>當我們提到 <code class="language-text">obj.foo</code>，我們已經知道 JavaScript 實際上會在 <code class="language-text">obj</code>，<code class="language-text">obj.__proto__</code>，<code class="language-text">obj.__proto__.__proto__</code> 尋找 <code class="language-text">foo</code>，以此類推。</p>
<p>在類別中，你不會直接被曝露這個機制，不過 <code class="language-text">extends</code> 也是在這個經典的原型鏈上運作，這就是我們 React 類別的實例如何取得像是 <code class="language-text">setState</code> 方法的方式：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line"><span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span></span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Greeting.prototype</span>
<span class="gatsby-highlight-code-line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// React.Component.prototype</span></span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Object.prototype</span>

c<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 在 c.__proto__ (Greeting.prototype) 找到</span>
<span class="gatsby-highlight-code-line">c<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 在 c.__proto__.__proto__ (React.Component.prototype) 找到</span></span>c<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 在 c.__proto__.__proto__.__proto__ (Object.prototype) 找到</span></code></pre></div>
<p>換句話說，<strong>當你在用類別的時候，一個實例的 <code class="language-text">__proto__</code> 鏈會「鏡像於」類別的階層結構：</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// `extends` 鏈</span>
Greeting
  → React<span class="token punctuation">.</span>Component
    → <span class="token function">Object</span> <span class="token punctuation">(</span>隱藏的<span class="token punctuation">)</span>

<span class="token comment">// `__proto__` 鏈</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  → Greeting<span class="token punctuation">.</span>prototype
    → React<span class="token punctuation">.</span>Component<span class="token punctuation">.</span>prototype
      → Object<span class="token punctuation">.</span>prototype</code></pre></div>
<p>兩個鏈，<a href="https://twitter.com/2chainz" target="_blank" rel="nofollow noopener noreferrer">2 Chainz</a>。</p>
<hr>
<p>因為 <code class="language-text">__proto__</code> 鏈反映了類別的階層結構，我們可以從 <code class="language-text">Greeting.prototype</code> 開始，隨著 <code class="language-text">__proto__</code> 鏈往下檢查，是否一個 <code class="language-text">Greeting</code> 擴展了 <code class="language-text">React.Component</code>：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// `__proto__` chain</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">  → Greeting<span class="token punctuation">.</span>prototype <span class="token comment">// 🕵️ 我們從這裡開始</span></span><span class="gatsby-highlight-code-line">    → React<span class="token punctuation">.</span>Component<span class="token punctuation">.</span>prototype <span class="token comment">// ✅ 找到了！</span></span>      → Object<span class="token punctuation">.</span>prototype</code></pre></div>
<p>便利上來說，<code class="language-text">x instanceof Y</code> 正好做了這種搜尋，它隨著 <code class="language-text">x.__proto__</code> 鏈尋找在那裡尋找 <code class="language-text">Y.prototype</code>。</p>
<p>通常，這被拿來判斷是否某個東西是不是一個類別的實例：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> greeting <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">Greeting</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// greeting （🕵️‍ 我們從這裡開始）</span>
<span class="token comment">//   .__proto__ → Greeting.prototype （✅ 找到了！）</span>
<span class="token comment">//     .__proto__ → React.Component.prototype</span>
<span class="token comment">//       .__proto__ → Object.prototype</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// greeting （‍🕵 我們從這裡開始）</span>
<span class="token comment">//   .__proto__ → Greeting.prototype</span>
<span class="token comment">//     .__proto__ → React.Component.prototype （✅ 找到了！）</span>
<span class="token comment">//       .__proto__ → Object.prototype</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// greeting （‍🕵 我們從這裡開始）</span>
<span class="token comment">//   .__proto__ → Greeting.prototype</span>
<span class="token comment">//     .__proto__ → React.Component.prototype</span>
<span class="token comment">//       .__proto__ → Object.prototype （✅ 找到了！）</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">Banana</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token comment">// greeting （‍🕵 我們從這裡開始）</span>
<span class="token comment">//   .__proto__ → Greeting.prototype</span>
<span class="token comment">//     .__proto__ → React.Component.prototype</span>
<span class="token comment">//       .__proto__ → Object.prototype（🙅‍ 沒有找到！）</span></code></pre></div>
<p>而它也可以用來對判斷一個類別是否擴展另一個類別：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">.</span>prototype <span class="token keyword">instanceof</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// greeting</span>
<span class="token comment">//   .__proto__ → Greeting.prototype （‍🕵 我們從這裡開始）</span>
<span class="token comment">//     .__proto__ → React.Component.prototype （✅ 找到了！）</span>
<span class="token comment">//       .__proto__ → Object.prototype</span></code></pre></div>
<p>然而，這就是我們如何判斷東西是一個 React 元件的類別還是一個一般函式的方法。</p>
<hr>
<p>雖然這不是 React 的作法。😳</p>
<p>有一個對用 <code class="language-text">instanceof</code> 解法的警告，是它在有多個 React 複製品的網頁不奏效，我們會用到 <em>另一個</em> React 複製品的 <code class="language-text">React.Component</code> 來檢查元件的繼承關係。有一些的原因說明了單一專案混砸了多個 React 的複製品是不好的，但在歷史上我們已盡可能避免出現這樣的問題。（在 Hook 中，我們 <a href="https://github.com/facebook/react/issues/13991" target="_blank" rel="nofollow noopener noreferrer">可能需要</a> 強制複製品刪除。）</p>
<p>另外一種可能的發想是或許可以檢查原型中是否存在 <code class="language-text">render</code> 方法，然而這在當時 <a href="https://github.com/facebook/react/issues/4599#issuecomment-129714112" target="_blank" rel="nofollow noopener noreferrer">並不清楚</a> 元件的 API 將會如何包裝，每一種檢查方式都有成本，所以我們也不希望添加一種以上的檢查，還有這種方法如果 <code class="language-text">render</code> 沒有定義為實例方法也不適用，例如類別屬性的語法。</p>
<p>所以取而代之的是，React 在底層元件中 <a href="https://github.com/facebook/react/pull/4663" target="_blank" rel="nofollow noopener noreferrer">添加了</a> 一個特殊的標記，React 會透過檢查這個標記是否存在，來判斷東西是不是 React 元件的方法，就是這樣。</p>
<p>最初，這個標記是位於底層的 <code class="language-text">React.Component</code> 類別本身：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// React 內</span>
<span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Component<span class="token punctuation">.</span>isReactClass <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 我們能像這樣檢查它</span>
<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">.</span>isReactClass<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ✅ Yes</span></code></pre></div>
<p>然而，在有些我們的目標的類別實作 <a href="https://github.com/scala-js/scala-js/issues/1900" target="_blank" rel="nofollow noopener noreferrer">沒有</a> 複製靜態的屬性（或設置非標準的 <code class="language-text">__proto__</code>），所以這個標記不見了。</p>
<p>這就是為什麽 React 把標記 <a href="https://github.com/facebook/react/pull/5021" target="_blank" rel="nofollow noopener noreferrer">移動</a> 到了 <code class="language-text">React.Component.prototype</code>：</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// React 內</span>
<span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Component<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isReactComponent <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 我們能像這樣檢查</span>
<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isReactComponent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ✅ Yes</span></code></pre></div>
<p><strong>而這就是實際上關於它全部得內容。</strong></p>
<p>你可能會疑惑為什麼標記是物件而不是布林值，實做上它是什麽並不重要，但在早年版本的 Jest（在 Jest 是 Good™️ 之前）預設會將自動模仿（automocking）打開，生成的模仿物省略了原生的屬性，<a href="https://github.com/facebook/react/pull/4663#issuecomment-136533373" target="_blank" rel="nofollow noopener noreferrer">破壞了檢查</a>。謝了，Jest。</p>
<p>截至今日，這個 <code class="language-text">isReactComponent</code> 檢查仍 <a href="https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js#L297-L300" target="_blank" rel="nofollow noopener noreferrer">在 React 中被使用</a>。</p>
<p>如果你沒有擴展 <code class="language-text">React.Component</code>，React 在原型中會找不到 <code class="language-text">isReactComponent</code>，進而不會把元件當成一個類別。現在你知道為何發生 <code class="language-text">Cannot call a class as a function</code> 錯誤 <a href="https://stackoverflow.com/a/42680526/458193" target="_blank" rel="nofollow noopener noreferrer">最受歡迎的解答</a> 是加 <code class="language-text">extends React.Component</code> 了。最後，<a href="https://stackoverflow.com/a/42680526/458193" target="_blank" rel="nofollow noopener noreferrer">增加了一個警告</a>，是會在 <code class="language-text">prototype.render</code> 存在，而 <code class="language-text">prototype.isReactComponent</code> 不存在時發出警告。</p>
<hr>
<p>你可能會說這篇故事有點誘導推銷（bait-and-switch）。<strong>實際上的答案其實非常簡單，但我卻用大量離題的事來 <em>解釋</em> 為什麼 React 到最後會用這個解法，以及替代方案是什麼。</strong></p>
<p>以我的經驗，函式庫 API 通常就是這種情況，為了使 API 易於使用，你常常需要去考慮程式語言的語意（對於很多種程式語言可能還需要考慮未來的走向）、運行效能、在有或沒有編譯階段時的的人體工學、生態系以及包裝解法的現狀、預先的警告、和其他很多東西，最後的結果可能不會總是那麼優雅，但它一定可行。</p>
<p><strong>如果最終 API 是可行的，<em>它的使用者</em> 就永遠不必去思考其中的過程，</strong>反而他們能專注於創造應用程式。</p>
<p>但如果你也充滿好奇心…，知道它如何運作也不錯。</p></div><footer><p><a href="https://mobile.twitter.com/search?q=https%3A%2F%2Fyusufunlu.github.io%2FPersonal-Blog%2F%2Fhow-does-react-tell-a-class-from-a-function%2F" target="_blank" rel="noopener noreferrer">Discuss on Twitter</a> • <a href="https://github.com/gaearon/overreacted.io/edit/master/src/pages/how-does-react-tell-a-class-from-a-function/index.zh-hant.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a></p></footer></article></main><aside><div style="margin:90px 0 40px 0;font-family:system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;,
    &quot;Roboto&quot;, &quot;Oxygen&quot;, &quot;Ubuntu&quot;, &quot;Cantarell&quot;, &quot;Fira Sans&quot;,
    &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif"><form action="https://app.convertkit.com/forms/812047/subscriptions" class="seva-form formkit-form" method="post" min-width="400 500 600 700 800" style="background-color:rgb(255, 255, 255);border-radius:6px"><div data-style="full"><div data-element="column" class="formkit-column" style="background-color:rgb(249, 250, 251)"><h1 class="formkit-header" data-element="header" style="color:rgb(77, 77, 77);font-size:20px;font-weight:700">Join the Newsletter</h1><div data-element="subheader" class="formkit-subheader" style="color:rgb(104, 104, 104)"><p>Subscribe to get my latest content by email.</p></div><div class="formkit-image"><svg xmlns="http://www.w3.org/2000/svg" width="46" height="46" viewBox="0 0 46 46" style="max-width:100%"><g fill="none" fill-rule="evenodd"><path fill="#DD92AB" d="M23,36 C22.813,36 22.627,35.948 22.463,35.844 L0.463,21.844 C0.159,21.651 -0.017,21.308 0.001,20.948 C0.02,20.589 0.23,20.266 0.553,20.105 L23,6 L45.447,20.105 C45.769,20.266 45.98,20.588 45.999,20.948 C46.018,21.308 45.841,21.65 45.537,21.844 L23.537,35.844 C23.373,35.948 23.187,36 23,36 Z"></path><path fill="#FFF" d="M38,37 L8,37 L8,1 C8,0.448 8.448,0 9,0 L37,0 C37.552,0 38,0.448 38,1 L38,37 Z"></path><path fill="#FFA7C4" d="M45,46 C44.916,46 44.831,45.989 44.748,45.968 L21.748,39.968 L22,33 L46,21 L46,45 C46,45.31 45.856,45.602 45.611,45.792 C45.435,45.928 45.219,46 45,46 Z"></path><path fill="#FFC3D7" d="M45,46 L1,46 C0.447,46 0,45.552 0,45 L0,21 L45.479,44.122 C45.88,44.341 46.083,44.804 45.969,45.247 C45.856,45.69 45.457,46 45,46 Z"></path><path fill="#FFA7C4" d="M19 20.414L14.293 15.707C13.902 15.316 13.902 14.684 14.293 14.293L19 9.586 20.414 11 16.414 15 20.414 19 19 20.414zM27 20.414L25.586 19 29.586 15 25.586 11 27 9.586 31.707 14.293C32.098 14.684 32.098 15.316 31.707 15.707L27 20.414z"></path></g></svg></div></div><div data-element="column" class="formkit-column"><ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul><div data-element="fields" class="seva-fields formkit-fields"><div class="formkit-field"><input type="text" class="formkit-input" aria-label="Your first name" name="fields[first_name]" placeholder="Your first name" style="border-color:rgb(227, 227, 227);border-radius:4px;color:rgb(0, 0, 0);font-weight:400"/></div><div class="formkit-field"><input type="email" class="formkit-input" name="email_address" aria-label="Your email address" placeholder="Your email address" style="border-color:rgb(227, 227, 227);border-radius:4px;color:rgb(0, 0, 0);font-weight:400"/></div><button data-element="submit" class="formkit-submit formkit-submit" style="background-color:hsl(340, 63%, 55%);border-radius:24px;color:white;font-weight:700"><div class="formkit-spinner"></div><span>Subscribe</span></button></div><div data-element="guarantee" class="formkit-guarantee" style="color:rgb(77, 77, 77);font-size:13px;font-weight:400"><p>I won’t send you spam.</p><p>Unsubscribe at <em>any</em> time.</p></div></div></div></form></div><h3 style="font-family:Montserrat, sans-serif;margin-top:0.4375rem"><a style="box-shadow:none;text-decoration:none;color:var(--pink)" href="/Personal-Blog/">Overreacted</a></h3><div style="display:flex;margin-bottom:3.5rem"><img src="/Personal-Blog/static/profile-pic-69c77131fd248a7aaaf26fab021f469f.png" alt="Yusuf Unlu" style="margin-right:0.875rem;margin-bottom:0;height:3.5rem;border-radius:50%"/><p style="max-width:310px">Personal blog by <a href="https://mobile.twitter.com/yufusunlu">Yusuf Unlu</a>.<!-- --> <!-- -->I explain with words and code.</p></div><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li></li><li></li></ul></nav></aside></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-130227707-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"zh-hant-how-does-react-tell-a-class-from-a-function-44c","path":"/zh-hant/how-does-react-tell-a-class-from-a-function/"};window.dataPath="363/path---zh-hant-how-does-react-tell-a-class-from-a-function-44-c-f3f-6zEIaNlJKPjN0RBGihIpgWNC88";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-198cd55e69a6a03b3f73.js"],"component---src-templates-blog-index-js":["/component---src-templates-blog-index-js-1d061c91bf8b4d1ed13d.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.77da55083c18bdb7fbef.css","/component---src-templates-blog-post-js-ef2898a2e81c47683f5b.js"],"component---src-pages-404-js":["/component---src-pages-404-js.fd288bb02445d10643fa.css","/component---src-pages-404-js-b3cd5f330471999955d6.js"],"component---src-pages-confirm-js":["/component---src-pages-confirm-js.fd288bb02445d10643fa.css","/component---src-pages-confirm-js-009d25afd727cbb30f51.js"],"component---src-pages-thanks-js":["/component---src-pages-thanks-js.fd288bb02445d10643fa.css","/component---src-pages-thanks-js-8fa56c06867d62f44f13.js"],"pages-manifest":["/pages-manifest-39a0dca89e16fd875f78.js"]};/*]]>*/</script><script src="/Personal-Blog/webpack-runtime-816b037bee21ad2c738f.js" async=""></script><script src="/Personal-Blog/1-1b550cd61a5e170131aa.js" async=""></script><script src="/Personal-Blog/2-469c709c476faea7103a.js" async=""></script><script src="/Personal-Blog/0-b197e8c6c7ff26484233.js" async=""></script><script src="/Personal-Blog/app-198cd55e69a6a03b3f73.js" async=""></script><script src="/Personal-Blog/component---src-templates-blog-post-js-ef2898a2e81c47683f5b.js" async=""></script></body></html>